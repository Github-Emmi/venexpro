{% extends "jobs/admin_templates/base.html" %}
{% load static %}

{% block title %}Market Overview - Venex Broker{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'assets/css/market.css' %}">
<link rel="stylesheet" href="{% static 'assets/css/dashboard.css' %}"
{% endblock %}

{% block head_js %}
<script>
    window.marketData = {
        market_stats: {{ market_stats|safe }},
        cryptocurrencies: {{ cryptocurrencies|safe }},
        current_prices: {{ current_prices|safe }}
    };
</script>
{% endblock %}

{% block main_content %}
<div class="market-container">

    <!-- Market Overview Header -->
    <section class="market-overview">
        <div class="section-header">
            <h1 class="section-title">Market Overview</h1>
            <div class="last-updated" id="lastUpdated">
                Last updated: <span id="updateTime">--</span>
            </div>
        </div>
        
        <div class="stats-grid" id="marketStats">
            <div class="stat-card">
                <div class="stat-icon">ðŸ“Š</div>
                <div class="stat-info">
                    <div class="stat-label">Global Market Cap</div>
                    <div class="stat-value" id="globalMarketCap">--</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ðŸ’¹</div>
                <div class="stat-info">
                    <div class="stat-label">24h Volume</div>
                    <div class="stat-value" id="totalVolume">--</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">â‚¿</div>
                <div class="stat-info">
                    <div class="stat-label">BTC Dominance</div>
                    <div class="stat-value" id="btcDominance">--</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ðŸª™</div>
                <div class="stat-info">
                    <div class="stat-label">Active Cryptos</div>
                    <div class="stat-value" id="activeCryptos">--</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Live Cryptocurrency Prices -->
    <section class="crypto-prices-section">
        <div class="live_market" id="live_market">
        <div class="market-header">
            <h1>Live Cryptocurrency Market</h1>
            <p>Real-time digital asset prices and statistics</p>
        </div>

        <div class="crypto-grid" id="cryptoGrid">
            <!-- Crypto cards will be dynamically populated by JavaScript -->
        </div>

        <div class="last-updated" id="lastUpdated">
            Last updated: <span id="updateTime">--</span>
        </div>
    </div>
    </section>

    <!-- Top Gainers & Losers -->
    <section class="performance-section">
        <div class="performance-grid">
            <!-- Top Gainers -->
            <div class="performance-card gainers-card">
                <div class="performance-header">
                    <h3 class="performance-title">ðŸš€ Top Gainers (24h)</h3>
                    <div class="performance-subtitle">Biggest positive movements</div>
                </div>
                <div class="performance-list" id="topGainers">
                    <!-- Gainers will be populated by JavaScript -->
                </div>
            </div>

            <!-- Top Losers -->
            <div class="performance-card losers-card">
                <div class="performance-header">
                    <h3 class="performance-title">ðŸ“‰ Top Losers (24h)</h3>
                    <div class="performance-subtitle">Biggest negative movements</div>
                </div>
                <div class="performance-list" id="topLosers">
                    <!-- Losers will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Loading State -->
    <div class="loading-state" id="loadingState">
        <div class="loading-spinner"></div>
        <p>Loading market data...</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'assets/js/market.js' %}"></script>
<script src="{% static 'assets/js/venex-dashboard.js' %}"></script>
{% endblock %}