{% extends 'emails/base_email.html' %}

{% block header_title %}Transaction {{ transaction.get_status_display }}{% endblock %}
{% block header_subtitle %}{% if transaction.status == 'COMPLETED' %}Transaction Completed{% else %}Transaction Update{% endif %}{% endblock %}

{% block content %}
<div class="email-content">
    <h2>Hello {{ user.first_name }},</h2>
    
    <p>Your {{ transaction.get_transaction_type_display|lower }} transaction has been <strong>{{ transaction.get_status_display|lower }}</strong>.</p>
    
    <div class="user-info">
        <strong>Transaction Details:</strong><br>
        <strong>Type:</strong> {{ transaction.get_transaction_type_display }}<br>
        <strong>Cryptocurrency:</strong> {{ transaction.get_cryptocurrency_display }}<br>
        {% if transaction.quantity %}
        <strong>Quantity:</strong> {{ transaction.quantity }} {{ transaction.cryptocurrency }}<br>
        {% endif %}
        {% if transaction.fiat_amount %}
        <strong>Amount:</strong> {{ transaction.fiat_amount }} {{ transaction.currency }}<br>
        {% endif %}
        <strong>Total:</strong> ${{ transaction.total_amount|floatformat:2 }}<br>
        <strong>Transaction ID:</strong> {{ transaction.id }}<br>
        <strong>Date:</strong> {{ transaction.created_at|date:"F j, Y g:i A" }}
    </div>
    
    {% if transaction.status == 'COMPLETED' %}
    <div class="highlight" style="border-left-color: #28a745;">
        <strong>✅ Transaction Completed Successfully</strong><br>
        Your funds have been processed and your account has been updated accordingly.
    </div>
    {% elif transaction.status == 'FAILED' %}
    <div class="highlight" style="border-left-color: #dc3545;">
        <strong>❌ Transaction Failed</strong><br>
        Please contact our support team for assistance with this transaction.
    </div>
    {% elif transaction.status == 'PENDING' %}
    <div class="highlight" style="border-left-color: #ffc107;">
        <strong>⏳ Transaction Pending</strong><br>
        Your transaction is being processed. You will receive another notification once it's completed.
    </div>
    {% endif %}
    
    {% if transaction.transaction_hash %}
    <p><strong>Transaction Hash:</strong> {{ transaction.transaction_hash }}</p>
    {% endif %}
    
    <p>If you have any questions about this transaction, please don't hesitate to contact our support team.</p>
    
    <div style="text-align: center;">
        <a href="{{ transaction_details_url }}" class="button">View Transaction Details</a>
    </div>
    
    <p>Best regards,<br>
    <strong>Venex Brokerage Team</strong></p>
</div>
{% endblock %}